(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d71938","chunk-b310dbce"],{"0419":function(e,t,n){var i={"./3024-day.css":"e27f","./3024-night.css":"2c09","./abbott.css":"6f22","./abcdef.css":"6d0c","./ambiance-mobile.css":"8b9e","./ambiance.css":"0f7c","./ayu-dark.css":"cc5a","./ayu-mirage.css":"5514","./base16-dark.css":"8c2e","./base16-light.css":"cc10","./bespin.css":"89e2","./blackboard.css":"7393","./cobalt.css":"a8d9","./colorforth.css":"03a9","./darcula.css":"7ba3","./dracula.css":"0109","./duotone-dark.css":"e8b0","./duotone-light.css":"b6fc","./eclipse.css":"01cb","./elegant.css":"ac1e","./erlang-dark.css":"a5242","./gruvbox-dark.css":"15ad","./hopscotch.css":"0176","./icecoder.css":"46ff","./idea.css":"b866","./isotope.css":"1ddb","./juejin.css":"6838","./lesser-dark.css":"7b0e","./liquibyte.css":"cdf4","./lucario.css":"737c","./material-darker.css":"ebe1","./material-ocean.css":"5a25","./material-palenight.css":"d79d","./material.css":"d2e8","./mbo.css":"9603","./mdn-like.css":"eb8f","./midnight.css":"1ad7","./monokai.css":"7a7a","./moxer.css":"30c5","./neat.css":"bbca","./neo.css":"d5db","./night.css":"471d","./nord.css":"3dad","./oceanic-next.css":"8725","./panda-syntax.css":"fade","./paraiso-dark.css":"1b85","./paraiso-light.css":"281e","./pastel-on-dark.css":"068cb","./railscasts.css":"4946","./rubyblue.css":"acdf","./seti.css":"ed9c","./shadowfox.css":"7f1a","./solarized.css":"8c06","./ssms.css":"eafa","./the-matrix.css":"c9a2","./tomorrow-night-bright.css":"2618","./tomorrow-night-eighties.css":"1759","./ttcn.css":"4659","./twilight.css":"7aa3","./vibrant-ink.css":"ad99","./xq-dark.css":"bd58","./xq-light.css":"8d7e","./yeti.css":"f0df","./yonce.css":"498a5","./zenburn.css":"5bee"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=o,e.exports=a,a.id="0419"},"13c8":function(e,t,n){"use strict";n("d5bd")},"43ba":function(e,t,n){},"519a":function(e,t,n){},8417:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container",staticStyle:{"margin-top":"2vh"}},[e.showSearch?n("el-form",{ref:"queryForm",attrs:{inline:!0,"label-width":"auto"}},[n("el-form-item",{attrs:{label:"请选择主题",prop:"postCode"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.cmTheme,callback:function(t){e.cmTheme=t},expression:"cmTheme"}},e._l(e.cmThemeOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"请选择编辑模式",prop:"postCode"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.onEditorModeChange},model:{value:e.cmEditorMode,callback:function(t){e.cmEditorMode=t},expression:"cmEditorMode"}},e._l(e.cmEditorModeOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.copyValue}},[e._v("复制内容")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.open=!e.open}}},[e._v("修改校验规则")]),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{"split-button":"",type:"primary",size:"small"},on:{click:function(t){return e.execCommand(e.execCommandValue)},command:e.handleCommand}},[e._v(" "+e._s(e.execCommandTranslate[e.execCommandValue])+" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.execCommandTranslate,(function(t,i){return n("el-dropdown-item",{key:i,attrs:{command:i}},[e._v(e._s(t)+" ")])})),1)],1)],1)],1):e._e(),n("code-mirror-editor",{ref:"cmEditor",attrs:{cmTheme:e.cmTheme,cmMode:e.cmMode,autoFormatJson:e.autoFormatJson,jsonIndentation:e.jsonIndentation,lintOptions:e.lintOptions,newValue:e.editorValue}}),n("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[n("el-form",{ref:"form",attrs:{"label-position":"left","label-width":"90px"}},e._l(e.lintOptions.options,(function(t,i){return n("el-row",{key:i},["object"!==typeof e.lintOptions.options[i]?n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:i,prop:i}},["boolean"===typeof e.lintOptions.options[i]?n("el-switch",{attrs:{"active-text":i},model:{value:e.lintOptions.options[i],callback:function(t){e.$set(e.lintOptions.options,i,t)},expression:"lintOptions.options[key]"}}):"number"===typeof e.lintOptions.options[i]?n("el-input-number",{attrs:{size:"mini",min:0,max:100},model:{value:e.lintOptions.options[i],callback:function(t){e.$set(e.lintOptions.options,i,t)},expression:"lintOptions.options[key]"}}):n("el-input",{model:{value:e.lintOptions.options[i],callback:function(t){e.$set(e.lintOptions.options,i,t)},expression:"lintOptions.options[key]"}})],1)],1):e._e(),n("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:12}},[e._v(" "+e._s(e.lintOptions.message[i])+" ")])],1)})),1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),n("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},a=[],o=(n("b64b"),n("e9c4"),n("347b")),s=n("8f94"),r={name:"Codemirror",components:{CodeMirrorEditor:o["a"]},watch:{toggleExpandAll:function(e){var t=this;this.$nextTick((function(){e?t.collapseAll():t.expandAll()}))}},activated:function(){var e=this;this.$nextTick((function(){requestAnimationFrame((function(){e.$el.scrollTop=e.scrollTop}))}))},beforeRouteLeave:function(e,t,n){this.scrollTop=this.$el.scrollTop,n()},data:function(){return{scrollTop:0,editorValue:"",execCommandTranslate:{find:"查找",replace:"替换",insertSoftTab:"缩进",findNext:"查找下一个",findPrev:"查找上一个",replaceAll:"替换全部",undo:"撤销上次修改",redo:"重做上次修改"},execCommandValue:"find",toggleExpandAll:!1,open:!1,title:"修改Codemirror校验代码标准",lintOptions:{options:{esnext:!0,strict:!1,asi:!0,boss:!0,undef:!0,eqnull:!0,evil:!0,expr:!0,funcscope:!0,sub:!0,supernew:!0,validthis:!0,proto:!0,maxerr:15,loopfunc:!0,laxcomma:!0,globals:{game:!0,get:!0,lib:!0,ui:!0,ai:!0,event:!0,card:!0,cards:!0,source:!0,player:!0,target:!0,targets:!0,skill:!0,trigger:!0,result:!0,_status:!0},bitwise:!0,camelcase:!1,curly:!1,eqeqeq:!1,es3:!1,forin:!1,freeze:!0,immed:!1,indent:2,latedef:!0,newcap:!1,noarg:!0,noempty:!1,nonbsp:!1,nonew:!1,plusplus:!1,quotemark:!1,unused:!1,trailing:!1,browser:!0,devel:!0},message:{esnext:"允许使用ES6标准",bitwise:"禁用位运算符(如^，&)",camelcase:"使用驼峰命名(camelCase)或全大写下划线命名(UPPER_CASE)",curly:"if、for、while等语句中使用{}来明确代码块",eqeqeq:"强制使用===和!==替代==和!=",es3:"强制使用ECMAScript 3规范",forin:"在for in循环中使用Object.prototype.hasOwnProperty()来过滤原型链中的属性",freeze:"禁止复写原生对象(如Array, Date)的原型",immed:"匿名函数调用必须",indent:"代码缩进宽度（空格数）",latedef:"变量定义前禁止使用",newcap:"构造函数名首字母必须大写",noarg:"禁止使用arguments.caller和arguments.callee",noempty:"禁止出现空的代码块",nonbsp:"禁止”non-breaking whitespace”这是Mac键盘在某种情况下可以键入的字符，据说会破坏非UTF8编码的页面。",nonew:"禁止使用构造器",plusplus:"禁止使用++和–",quotemark:"统一使用单引号或双引号",undef:"禁止使用不在全局变量列表中的未定义的变量",unused:"禁止定义变量却不使用",strict:"强制使用ES5的严格模式",trailing:"禁止行尾空格",asi:"允许省略分号",boss:"允许在if，for，while语句中使用赋值",eqnull:"允许==null",evil:"允许使用eval",expr:"允许应该出现赋值或函数调用的地方使用表达式",funcscope:"允许在控制体内定义变量而在外部使用",sub:"允许person['name'] JSHint推荐使用person.name代替person['name']",supernew:"允许new function() {…}和new Object",validthis:"允许严格模式下在非构造函数中使用this",proto:"允许 proto 不是所有的浏览器都支持__proto__.",maxerr:"扫描代码中累计到的最大错误数量",loopfunc:"允许循环中定义函数",laxcomma:"允许逗号开头的编码样式",browser:"暴露浏览器属性的全局变量，列如 window,document;注意:这个选项不暴露变量 alert或 console。",devel:"这个选项定义了全局变量,通常用于日志调试: console, alert等等。"}},showSearch:!0,cmTheme:"default",cmThemeOptions:["default","eclipse","3024-day","3024-night","abcdef","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","darcula","dracula","duotone-dark","duotone-light","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","lesser-dark","liquibyte","lucario","material","material-darker","material-palenight","material-ocean","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized dark","solarized light","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"],cmEditorMode:"default",cmEditorModeOptions:["default","json","sql","javascript","css","xml","html","yaml","markdown"],cmMode:"javascript",jsonIndentation:2,autoFormatJson:!1}},created:function(){var e,t=null===(e=this.$route.params)||void 0===e?void 0:e.newValue;t&&(this.editorValue=t),this.initOptions()},methods:{fullScreen:function(){var e=this;this.$nextTick((function(){var t,n,i,a;null===(t=e.$refs.cmEditor)||void 0===t||null===(n=t.$refs)||void 0===n||null===(i=n.myCm)||void 0===i||null===(a=i.codemirror)||void 0===a||a.setOption("fullScreen",!0)}))},cancel:function(){this.open=!1},submitForm:function(){var e=this;this.$nextTick((function(){var t,n,i,a;null===(t=e.$refs.cmEditor)||void 0===t||null===(n=t.$refs)||void 0===n||null===(i=n.myCm)||void 0===i||null===(a=i.codemirror)||void 0===a||a.setOption("lint",e.lintOptions)})),this.open=!1,this.setItemLintOption()},initOptions:function(){var e=this.getItemLintOption();Object.keys(e).length===Object.keys(this.lintOptions.options).length&&(this.lintOptions.options=e)},setItemLintOption:function(){localStorage.setItem("lintOption",JSON.stringify(this.lintOptions.options))},getItemLintOption:function(){return JSON.parse(localStorage.getItem("lintOption")||"{}")},collapseAll:function(){var e=this.$refs.cmEditor.$refs.myCm.codemirror;e.operation((function(){for(var t=e.firstLine(),n=e.lastLine();t<=n;t++)e.foldCode(s["CodeMirror"].Pos(t,0),null,"fold")}))},expandAll:function(){var e=this.$refs.cmEditor.$refs.myCm.codemirror;e.operation((function(){for(var t=e.firstLine(),n=e.lastLine();t<=n;t++)e.foldCode(s["CodeMirror"].Pos(t,0),null,"unfold")}))},onEditorModeChange:function(e){switch(e){case"json":this.cmMode="application/json";break;case"sql":this.cmMode="sql";break;case"javascript":this.cmMode="javascript";break;case"xml":this.cmMode="xml";break;case"css":this.cmMode="css";break;case"html":this.cmMode="htmlmixed";break;case"yaml":this.cmMode="yaml";break;default:this.cmMode="application/json"}},setStyle:function(){var e="position: absolute; top: 80px; left: 50px; right: 200px; bottom: 20px; padding: 2px; height: auto;";this.$refs.cmEditor.setStyle(e)},getValue:function(){var e=this.$refs.cmEditor.getValue();return console.log(e),e},copyValue:function(){var e=this.getValue();this.copy(e)},setValue:function(e){this.$refs.cmEditor.setValue(e)},execCommand:function(e){this.$refs.cmEditor.execCommand(e)},handleCommand:function(e){this.execCommandValue=e,this.execCommand(e)},indentAuto:function(){this.$refs.cmEditor.$refs.myCm.codemirror.indentSelection("smart")}}},l=r,c=(n("86c6"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,"ab2c695e",null);t["default"]=u.exports},"86c6":function(e,t,n){"use strict";n("43ba")},"94d4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e.showSearch?n("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"50px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"搜索",prop:"cardName"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"支持拼音，模糊请用 空格 分离",clearable:"",size:"small"},on:{change:function(t){e.queryParams.search=e.queryParams.search.trim()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.querySearch(t))}},model:{value:e.queryParams.search,callback:function(t){e.$set(e.queryParams,"search",t)},expression:"queryParams.search"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.querySearch}},[e._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-s-tools",size:"small"},on:{click:function(t){e.openWeight=!e.openWeight}}},[e._v("设置权重")])],1)],1):e._e(),n("right-toolbar",{attrs:{showSearch:e.showSearch,columns:e.columns},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}}),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList,stripe:"",border:"","highlight-current-row":"","empty-text":"无"}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-table",{attrs:{data:t.row.skillsNode,border:""}},[n("el-table-column",{attrs:{label:"技能ID",align:"center",prop:"key"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.key)}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"技能名称",align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.name)}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"技能介绍",align:"center","show-tooltip-when-overflow":"",prop:"info"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.info)}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.showInfoCode({sourceKey:t.row.key},!0)}}},[n("i",{staticClass:"el-icon-view el-icon--right"}),e._v(" 打开代码页 ")])]}}],null,!0)})],1)]}}])}),e.columns[0].visible?n("el-table-column",{attrs:{label:e.columns[0].label,align:"center",prop:"img"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-image",{attrs:{fit:"fill",src:e.row.img,"preview-src-list":[e.row.img]}})]}}],null,!1,1451794928)}):e._e(),e.columns[1].visible?n("el-table-column",{attrs:{label:e.columns[1].label,align:"center",prop:"key"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.key)}})]}}],null,!1,812620258)}):e._e(),e.columns[2].visible?n("el-table-column",{attrs:{label:e.columns[2].label,align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.name)}})]}}],null,!1,3288923954)}):e._e(),e.columns[3].visible?n("el-table-column",{attrs:{label:e.columns[3].label,align:"center",prop:"pinyin"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.pinyin)}})]}}],null,!1,2808384892)}):e._e(),e.columns[4].visible?n("el-table-column",{attrs:{label:e.columns[4].label,align:"center",prop:"findCharacterPack"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(e.getCharacterPack(t.row.sourceKey))}})]}}],null,!1,1677689800)}):e._e(),e.columns[5].visible?n("el-table-column",{attrs:{label:e.columns[5].label,align:"center",prop:"info","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{all:"inherit"},domProps:{innerHTML:e._s(t.row.info)}})]}}],null,!1,1124899899)}):e._e(),e.columns[6].visible?n("el-table-column",{attrs:{label:e.columns[6].label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.showCharacterCard(t.row)}}},[n("i",{staticClass:"el-icon-view el-icon--right"}),e._v(" 武将卡片 ")])]}}],null,!1,3709869824)}):e._e()],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),n("el-dialog",{attrs:{title:e.title,visible:e.open,"custom-class":"hidden-header",fullscreen:"","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[n("MyCodemirrorEdit",{ref:"myCodemirrorEdit",attrs:{editorValue:e.code}})],1),n("el-dialog",{attrs:{title:"设置权重",visible:e.openWeight,"append-to-body":""},on:{"update:visible":function(t){e.openWeight=t}}},[n("el-form",{attrs:{inline:!0,"label-width":"68px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{staticStyle:{display:"block","font-size":"20px"}},[n("b",[e._v("权重越高，其相关性得分越高,为0则不进行搜索,若设置多个权重则模糊搜索至少匹配一项")])]),e._l(e.weight,(function(t){return n("el-form-item",{key:t.key,attrs:{label:t.label}},[n("el-input-number",{staticStyle:{width:"240px"},attrs:{min:0,max:10,size:"small"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)}))],2),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitWightForm}},[e._v("确 定")]),n("el-button",{on:{click:function(t){e.openWeight=!1}}},[e._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"武将详细",visible:e.openCharaterCard,modal:!1,fullscreen:"","append-to-body":""},on:{"update:visible":function(t){e.openCharaterCard=t}}},[n("el-row",{staticStyle:{height:"calc(100vh - 114px)"},attrs:{gutter:20}},[n("el-col",{staticStyle:{height:"100%"},attrs:{span:9}},[n("el-image",{staticStyle:{width:"100%"},attrs:{src:e.menuShowDesc.infoImg}},[n("div",{staticClass:"image-slot",staticStyle:{height:"100%"},attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1),n("el-col",{attrs:{span:15}},[n("el-container",[n("el-header",{staticStyle:{"justify-items":"center","align-items":"center","justify-content":"center",display:"flex"}},[n("el-menu",{staticStyle:{display:"flex",width:"100%","text-align":"center"},attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[n("el-menu-item",{staticStyle:{"flex-grow":"1"},attrs:{index:"info"}},[e._v("武将介绍")]),n("el-menu-item",{staticStyle:{"flex-grow":"1"},attrs:{index:"skills"}},[e._v("武将技能")]),n("el-menu-item",{staticStyle:{"flex-grow":"1"},attrs:{index:"disable"}},[e._v("模式禁用")])],1)],1),n("el-container",[n("el-main",{staticStyle:{display:"flex"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.menuShow.info,expression:"menuShow.info"}],domProps:{innerHTML:e._s(e.menuShowDesc.info)}}),n("el-collapse",{directives:[{name:"show",rawName:"v-show",value:e.menuShow.skills,expression:"menuShow.skills"}],staticStyle:{width:"100%"},attrs:{"v-model":e.menuShowDesc.skills.map((function(e){return e.id}))}},e._l(e.menuShowDesc.skills,(function(t,i){return n("el-collapse-item",{key:i,attrs:{title:t.name,name:t.id}},[n("span",{domProps:{innerHTML:e._s(t.info)}}),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.showInfoCode({sourceKey:t.id,dialog:"openCharaterCard"},!0)}}},[n("i",{staticClass:"el-icon-view el-icon--right"}),e._v(" 打开代码页 ")])],1)})),1),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.menuShow.disable,expression:"menuShow.disable"}],staticStyle:{display:"flex","justify-content":"center","flex-wrap":"wrap","align-content":"flex-start","justify-items":"center"},attrs:{inline:!0,"label-width":"60px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.menuShowDesc.forbidais,(function(t,i){return n("el-form-item",{key:i,staticStyle:{display:"flex","justify-content":"center","align-content":"center",width:"45%"},attrs:{label:t.label}},[n("el-switch",{attrs:{"inactive-color":"#13ce66","active-color":"#ff4949","active-text":"禁用","inactive-text":"开启"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"value.value"}})],1)})),n("el-form-item",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.SaveForbidai}},[e._v("确认")])],1)],2)],1)],1)],1)],1)],1)],1)],1)},a=[],o=n("b85c"),s=n("c7eb"),r=n("1da1"),l=(n("d81d"),n("4de4"),n("d3b7"),n("a15b"),n("ac1f"),n("5319"),n("841c"),n("caad"),n("2532"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("9767"),n("fb6a"),n("159b"),n("14d9"),n("99af"),n("e9c4"),n("b64b"),n("0278")),c=n.n(l),u=n("aa62"),d=n.n(u),m=n("8417"),f=n("c38a"),h="Character",p={name:h,components:{MyCodemirrorEdit:m["default"]},activated:function(){var e=this;this.$nextTick((function(){requestAnimationFrame((function(){e.$el.scrollTop=e.scrollTop}))}))},beforeRouteLeave:function(e,t,n){this.scrollTop=this.$el.scrollTop,n()},data:function(){return{scrollTop:0,activeIndex:"info",menuShow:{info:!0,skills:!1,disable:!1},menuShowDesc:{info:"",skills:[],forbidais:[],infoImg:""},code:"",loading:!0,showSearch:!0,total:0,dataList:[],title:"",open:!1,openWeight:!1,queryParams:{search:"",pageNum:1,pageSize:10},fuse:void 0,searchList:[],columns:[{key:0,label:"武将图片",visible:!0},{key:1,label:"武将ID",visible:!0},{key:2,label:"武将名称",visible:!0},{key:3,label:"武将拼音",visible:!1},{key:4,label:"所在包",visible:!0},{key:5,label:"描述",visible:!0},{key:6,label:"操作",visible:!0}],weight:[{key:"key",label:"武将ID",value:8},{key:"name",label:"武将名称",value:8},{key:"pinyin",label:"武将拼音",value:0},{key:"info",label:"武将介绍",value:0}],openCharaterCard:!1}},created:function(){var e=this;return Object(r["a"])(Object(s["a"])().mark((function t(){var n,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLocalData("".concat(h," - weight"));case 2:n=t.sent,i=n.data,null!==i&&(e.weight=i),e.lib?(e.initFuse(),e.$modal.msgSuccess("加载完毕，请开始使用"),e.loading=!1):e.postMessage({type:"get",data:"lib"});case 6:case"end":return t.stop()}}),t)})))()},computed:{theme:function(){return this.$store.state.settings.theme},lib:function(){return this.$store.state.user.lib},weights:function(){return this.weight.filter((function(e){return e.value>0})).map((function(e){return e.key}))}},watch:{lib:function(e){e&&(this.loading=!0,this.initFuse(),this.$modal.msgSuccess("加载完毕，请开始使用"),this.loading=!1)},searchList:function(e){var t=this;this.loading=!0,setTimeout((function(){if(!e.length)return t.dataList=[],t.total=0,void(t.loading=!1);var n=t.queryParams.search.replace(/\s+/g,"").split("").join("|"),i=(t.queryParams.pageNum-1)*t.queryParams.pageSize,a=e.map((function(e){return e.item})).map((function(e){var i={};for(var a in e)e.hasOwnProperty(a)&&"string"===typeof e[a]&&("sourceKey"!==a&&t.weights.includes(a)?i[a]=e[a].replace(new RegExp(n,"gim"),(function(e,n,i){return e.fontcolor(t.theme)})):i[a]=e[a]);return i}));t.dataList=a.slice(i,i+t.queryParams.pageSize).map((function(e){var n=lib.character[e.sourceKey],i=n[3];return i&&i.length>0&&(e.skillsNode=i.map((function(e){return{key:e,name:get.translation(e),info:get.translation(e,"info")}})),e.img=t.getBackgroundImage(e.sourceKey)),e})),t.loading=!1}),150)}},methods:{getBackgroundImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".jpg";if(e){var n,i,a=null,o=null,s=!1,r=get.mode();if(lib.characterPack["mode_"+r]&&lib.characterPack["mode_"+r][e]?"guozhan"===r?(i=lib.character[e],e.include("gz_shibing")?e=e.slice(3,11):(lib.config.mode_config.guozhan.guozhanSkin&&lib.character[e]&&lib.character[e][4].contains("gzskin")&&(s=!0),e=e.slice(3))):o=r:lib.character[e]?i=lib.character[e]:e.includes("::")&&(e=e.split("::"),o=e[0],e=e[1]),!o&&i&&i[4])for(var l=0;l<i[4].length;l++){if(i[4][l].includes("ext:")){a=i[4][l];break}if(i[4][l].includes("mode:")){o=i[4][l].slice(5);break}if(i[4][l].includes("character:")){e=i[4][l].slice(10);break}}return n=a?this.parentPath+a.replace(/ext:/,"/extension/"):o?this.parentPath+"/image/mode/"+o+"/character/"+e+t:this.parentPath+"/image/character/"+(s?"gz_":"")+e+t,n}},search:function(){var e=this,t=this.queryParams.search,n=this.queryParams.search.split(" ");return n.length>1&&(t={$or:n.map((function(t){var n={};return e.weight.filter((function(e){return e.value>0})).forEach((function(e){n[e.key]=t})),n}))}),this.fuse.search(t)},generateCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var n in e)e.hasOwnProperty(n)&&t.push({key:n,name:get.translation(n),pinyin:d.a.convertToPinyinString(get.translation(n),"",d.a.WITHOUT_TONE),info:get.characterIntro(n),sourceKey:n});return t},initFuse:function(){var e=this.generateCode(lib.character),t=this.weight.filter((function(e){return e.value>0})).map((function(e){return{name:e.key,weight:e.value/10}}));this.fuse=new c.a(e,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,findAllMatches:!0,minMatchCharLength:1,keys:t})},getList:function(){this.loading=!0,this.searchList=this.search(),this.loading=!1},cancel:function(){this.open=!1},querySearch:function(){if(""===this.queryParams.search)return this.$modal.msgInfo("请输入要搜索的描述");if(void 0===this.fuse)return this.$modal.msgInfo("请耐心等待初始化！");this.loading=!0,this.queryParams.pageNum=1;var e=this.search();this.searchList=e,this.total=e.length,this.loading=!1},setInfoCode:function(e){var t=e.sourceKey;return this.code="lib.skill.".concat(t," = ").concat(get.stringify(Object(f["c"])(lib.skill[t]))),this.code},showInfoCode:function(e,t){var n=this;this.setInfoCode(e);var i=e.dialog;this[i]&&(this[i]=!1),t||(this.open=!0,this.$nextTick((function(){n.$refs.myCodemirrorEdit.onEditorModeChange("javascript"),n.$refs.myCodemirrorEdit.setValue(n.code)}))),t&&this.$router.push({name:"CodemirrorShowCode",params:{newValue:this.code}})},submitWightForm:function(){var e=this;this.openWeight=!1,this.initFuse(),this.setItem("".concat(h," - weight"),this.weight).then((function(t){return e.$modal.msgSuccess("设置权重成功")}))},submitForm:function(){console.log(this.weight,JSON.stringify(this.weight))},getCharacterPack:function(e){for(var t in lib.characterPack)if(lib.characterPack.hasOwnProperty(t)){var n=lib.characterPack[t];if(n[e])return get.translation("".concat(t,"_character_config"))}return"无"},showCharacterCard:function(e){var t=this,n=e.sourceKey;this.menuShowDesc.infoImg=this.getBackgroundImage(n),this.menuShowDesc.info=get.characterIntro(n);var i=lib.character[n];this.menuShowDesc.skills=i[3].map((function(e){return{id:e,name:get.translation(e),info:get.translation(e,"info")}}));var a=Object.keys(lib.mode).filter((function(e){return lib.config["".concat(e,"_banned")]||(lib.config["".concat(e,"_banned")]=[]),!("connect"===e||!lib.config.all.mode.contains(e))}));this.menuShowDesc.forbidais=a.map((function(e){var t;return{id:n,label:get.translation(e),key:"".concat(e,"_banned"),value:null===(t=lib.config["".concat(e,"_banned")])||void 0===t?void 0:t.includes(n)}})),this.$nextTick((function(){t.openCharaterCard=!0}))},handleSelect:function(e){var t=this;Object.keys(this.menuShow).filter((function(t){return t!==e})).forEach((function(e){t.menuShow[e]=!1})),this.menuShow[e]=!0},SaveForbidai:function(){var e,t=this.menuShowDesc.forbidais.map((function(e){return{key:e.key,value:function(){var t=lib.config[e.key];return t||(t=[]),e.value?t.push(e.id):t=t.filter((function(t){return t!==e.id})),t}()}})),n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;game.saveConfig(i.key,i.value)}}catch(a){n.e(a)}finally{n.f()}this.$modal.msgSuccess("保存成功！")}}},b=p,g=(n("fce5"),n("13c8"),n("2877")),y=Object(g["a"])(b,i,a,!1,null,null,null);t["default"]=y.exports},9767:function(e,t,n){"use strict";var i=n("23e7"),a=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("fontcolor")},{fontcolor:function(e){return a(this,"font","color",e)}})},d5bd:function(e,t,n){},fce5:function(e,t,n){"use strict";n("519a")}}]);